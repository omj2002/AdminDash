<div class="sales-details-container">
  <!-- Header -->
  <div class="details-header">
    <div class="header-left">
      <button mat-icon-button (click)="goBackToDashboard()" class="back-button">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h1>Sales & Revenue Details</h1>
    </div>
    <div class="header-actions">
      <button mat-button color="primary" (click)="goBackToDashboard()">
        <mat-icon>dashboard</mat-icon>
        Back to Dashboard
      </button>
    </div>
  </div>

  <!-- Sales Overview Cards -->
  <div class="overview-cards">
    <mat-card class="overview-card">
      <mat-card-header>
        <mat-card-title>Today's Performance</mat-card-title>
        <mat-icon class="card-icon">today</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">${{ salesOverview.todaySales | number }}</div>
        <div class="metric-change positive">+5.2% vs yesterday</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="overview-card">
      <mat-card-header>
        <mat-card-title>This Week</mat-card-title>
        <mat-icon class="card-icon">date_range</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">${{ salesOverview.weeklySales | number }}</div>
        <div class="metric-change positive">+12.3% vs last week</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="overview-card">
      <mat-card-header>
        <mat-card-title>This Month</mat-card-title>
        <mat-icon class="card-icon">calendar_month</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">${{ salesOverview.monthlySales | number }}</div>
        <div class="metric-change positive">+{{ salesMetrics.monthlyGrowth }}% vs last month</div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Key Performance Indicators -->
  <mat-card class="kpi-card">
    <mat-card-header>
      <mat-card-title>Key Performance Indicators</mat-card-title>
      <mat-icon class="card-icon">analytics</mat-icon>
    </mat-card-header>
    <mat-card-content>
      <div class="kpi-grid">
        <div class="kpi-item">
          <div class="kpi-label">Average Order Value</div>
          <div class="kpi-value">${{ salesMetrics.averageOrderValue }}</div>
        </div>
        <div class="kpi-item">
          <div class="kpi-label">Conversion Rate</div>
          <div class="kpi-value">{{ salesMetrics.conversionRate }}%</div>
        </div>
        <div class="kpi-item">
          <div class="kpi-label">Customer Retention</div>
          <div class="kpi-value">{{ salesMetrics.customerRetention }}%</div>
        </div>
        <div class="kpi-item">
          <div class="kpi-label">Top Selling Category</div>
          <div class="kpi-value">{{ salesMetrics.topSellingCategory }}</div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Sales Chart -->
  <mat-card class="chart-card">
    <mat-card-header>
      <mat-card-title>Sales & Revenue Trends</mat-card-title>
      <mat-icon class="card-icon">show_chart</mat-icon>
    </mat-card-header>
    <mat-card-content>
      <div class="chart-container">
        <canvas baseChart
                [data]="salesChartData"
                [options]="salesChartOptions"
                [type]="'line'"
                class="chart">
        </canvas>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Monthly Sales Table -->
  <mat-card class="table-card">
    <mat-card-header>
      <mat-card-title>Monthly Sales Breakdown</mat-card-title>
      <mat-icon class="card-icon">table_chart</mat-icon>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="monthlySalesData" class="sales-table">
        <ng-container matColumnDef="month">
          <th mat-header-cell *matHeaderCellDef>Month</th>
          <td mat-cell *matCellDef="let element">{{ element.month }}</td>
        </ng-container>

        <ng-container matColumnDef="revenue">
          <th mat-header-cell *matHeaderCellDef>Revenue</th>
          <td mat-cell *matCellDef="let element">${{ element.revenue | number }}</td>
        </ng-container>

        <ng-container matColumnDef="orders">
          <th mat-header-cell *matHeaderCellDef>Orders</th>
          <td mat-cell *matCellDef="let element">{{ element.orders | number }}</td>
        </ng-container>

        <ng-container matColumnDef="growth">
          <th mat-header-cell *matHeaderCellDef>Growth</th>
          <td mat-cell *matCellDef="let element">
            <mat-chip [color]="getGrowthColor(element.growth)" selected>
              <mat-icon>{{ getGrowthIcon(element.growth) }}</mat-icon>
              {{ element.growth }}%
            </mat-chip>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Summary Statistics -->
  <div class="summary-cards">
    <mat-card class="summary-card">
      <mat-card-header>
        <mat-card-title>Total Revenue</mat-card-title>
        <mat-icon class="card-icon">attach_money</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="summary-value">${{ salesOverview.yearlySales | number }}</div>
        <div class="summary-label">Year to Date</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="summary-card">
      <mat-card-header>
        <mat-card-title>Average Growth</mat-card-title>
        <mat-icon class="card-icon">trending_up</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="summary-value">{{ salesMetrics.monthlyGrowth }}%</div>
        <div class="summary-label">Monthly Average</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="summary-card">
      <mat-card-header>
        <mat-card-title>Best Month</mat-card-title>
        <mat-icon class="card-icon">star</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="summary-value">December</div>
        <div class="summary-label">$42,000 Revenue</div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
