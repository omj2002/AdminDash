import{b as He,d as qe,e as ze,f as Ue}from"./chunk-UBXPVYTI.js";import{a as pe,b as ue,c as ge,d as fe,e as Ce,f as he,g as xe,h as ve,i as _e,j as Me,k as Se,l as A,m as Ge}from"./chunk-GTLK435B.js";import{a as G,b as H}from"./chunk-BFWHI6MN.js";import{a as Ee}from"./chunk-YV3TLQAO.js";import{a as De,b as Ie,c as ye,d as Te,e as Fe,f as Oe,g as Be,h as Re,i as ke,j as Ae,k as Ne}from"./chunk-6GSHFZDM.js";import{a as we,b as $,c as Ve,d as Le}from"./chunk-VVK67SDJ.js";import{b as $e,c as je,d as q}from"./chunk-GXHTTDCA.js";import"./chunk-AAIC3GS6.js";import{K as N,n as te,o as w,p as ie}from"./chunk-7LI5U462.js";import{$d as be,Bb as x,Cc as F,Db as f,Dd as ae,Fd as b,Hd as ne,Id as oe,Kb as X,La as l,Ld as re,Nd as le,Ob as a,Od as me,Pb as g,Qb as c,Qd as de,Sd as se,Ta as p,Ud as O,Vd as B,Xb as Y,Xd as ce,Yb as C,Yd as R,Za as I,Zb as S,Zd as k,_b as P,a as J,b as Q,cb as u,fe as Pe,ie as j,ke as V,ne as L,pa as E,qa as D,qb as d,rb as o,sb as e,tb as h,wb as v,wc as Z,xb as _,xc as ee,yc as y,zb as W,zc as T}from"./chunk-H7G55VRW.js";var z=ie("cms"),Je=w(z,n=>n.pages),bt=w(z,n=>n.selectedPage),Ke=w(z,n=>n.loading),Pt=w(z,n=>n.error);function nt(n,t){if(n&1&&(o(0,"div",8)(1,"mat-card")(2,"mat-card-content")(3,"h3"),a(4),e(),o(5,"div",9)(6,"div",10)(7,"strong"),a(8,"Slug:"),e(),a(9),e(),o(10,"div",10)(11,"strong"),a(12,"Status:"),e(),o(13,"mat-chip",11),a(14),C(15,"titlecase"),e()(),o(16,"div",10)(17,"strong"),a(18,"Author:"),e(),a(19),e(),o(20,"div",10)(21,"strong"),a(22,"Created:"),e(),a(23),C(24,"date"),e(),o(25,"div",10)(26,"strong"),a(27,"Updated:"),e(),a(28),C(29,"date"),e()(),o(30,"div",12)(31,"h4"),a(32,"Content Preview:"),e(),o(33,"div",13)(34,"p"),a(35),e()()()()()()),n&2){let i=f();l(4),g(i.data.page.title),l(5),c(" ",i.data.page.slug," "),l(4),d("color",i.getStatusColor(i.data.page.status)),l(),c(" ",S(15,8,i.data.page.status)," "),l(5),c(" ",i.data.page.author," "),l(4),c(" ",P(24,10,i.data.page.createdAt,"MMM dd, yyyy")," "),l(5),c(" ",P(29,13,i.data.page.updatedAt,"MMM dd, yyyy")," "),l(7),g(i.data.page.content||"No content available for preview.")}}function ot(n,t){if(n&1&&(o(0,"div",14)(1,"mat-card")(2,"mat-card-content")(3,"h3"),a(4,"Delete Page"),e(),o(5,"p"),a(6,"Are you sure you want to delete "),o(7,"strong"),a(8),e(),a(9,"?"),e(),o(10,"div",9)(11,"div",10)(12,"strong"),a(13,"Slug:"),e(),a(14),e(),o(15,"div",10)(16,"strong"),a(17,"Status:"),e(),o(18,"mat-chip",11),a(19),C(20,"titlecase"),e()()(),o(21,"p",15),a(22,"This action cannot be undone."),e()()()()),n&2){let i=f();l(8),g(i.data.page.title),l(6),c(" ",i.data.page.slug," "),l(4),d("color",i.getStatusColor(i.data.page.status)),l(),c(" ",S(20,4,i.data.page.status)," ")}}function rt(n,t){if(n&1&&(o(0,"div",16)(1,"form",17)(2,"mat-form-field",18)(3,"mat-label"),a(4,"Page Title"),e(),h(5,"input",19),e(),o(6,"mat-form-field",18)(7,"mat-label"),a(8,"Slug"),e(),h(9,"input",20),e(),o(10,"mat-form-field",18)(11,"mat-label"),a(12,"Status"),e(),o(13,"mat-select",21)(14,"mat-option",22),a(15,"Draft"),e(),o(16,"mat-option",23),a(17,"Published"),e(),o(18,"mat-option",24),a(19,"Archived"),e()()(),o(20,"mat-form-field",18)(21,"mat-label"),a(22,"Author"),e(),h(23,"input",25),e(),o(24,"mat-form-field",18)(25,"mat-label"),a(26,"Content"),e(),h(27,"textarea",26),e()()()),n&2){let i=f();l(),d("formGroup",i.pageForm)}}var M=class n{constructor(t,i,r){this.dialogRef=t;this.data=i;this.fb=r;this.pageForm=this.fb.group({title:[this.data.page?.title||"",b.required],slug:[this.data.page?.slug||"",b.required],status:[this.data.page?.status||"draft",b.required],author:[this.data.page?.author||"",b.required],content:[this.data.page?.content||"",b.required]})}pageForm;getDialogTitle(){switch(this.data.mode){case"create":return"Create New Page";case"edit":return"Edit Page";case"preview":return"Page Preview";case"delete":return"Delete Page";default:return"CMS Page"}}getDialogIcon(){switch(this.data.mode){case"create":return"add";case"edit":return"edit";case"preview":return"visibility";case"delete":return"delete";default:return"web"}}getConfirmButtonText(){switch(this.data.mode){case"create":return"Create Page";case"edit":return"Update Page";case"preview":return"Close";case"delete":return"Delete";default:return"Confirm"}}getStatusColor(t){switch(t){case"published":return"primary";case"draft":return"warn";case"archived":return"accent";default:return"primary"}}isFormValid(){return this.data.mode==="preview"||this.data.mode==="delete"?!0:this.data.mode==="create"||this.data.mode==="edit"?this.pageForm.valid:!1}onCancel(){this.dialogRef.close()}onConfirm(){if(this.data.mode==="preview")this.dialogRef.close();else if(this.data.mode==="delete")this.dialogRef.close({action:"delete",data:this.data.page});else if(this.data.mode==="create"||this.data.mode==="edit"){let t=this.pageForm.value;this.dialogRef.close({action:this.data.mode,data:t})}}static \u0275fac=function(i){return new(i||n)(p(he),p(xe),p(de))};static \u0275cmp=I({type:n,selectors:[["app-cms-dialog"]],decls:14,vars:7,consts:[[1,"cms-dialog"],["mat-dialog-title",""],["class","page-preview",4,"ngIf"],["class","delete-confirmation",4,"ngIf"],["class","page-form",4,"ngIf"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"page-preview"],[1,"page-info"],[1,"info-row"],["selected","",3,"color"],[1,"content-preview"],[1,"preview-content"],[1,"delete-confirmation"],[1,"warning-text"],[1,"page-form"],[3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title","placeholder","Enter page title"],["matInput","","formControlName","slug","placeholder","Enter page slug"],["formControlName","status"],["value","draft"],["value","published"],["value","archived"],["matInput","","formControlName","author","placeholder","Enter author name"],["matInput","","formControlName","content","placeholder","Enter page content","rows","6"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"h2",1)(2,"mat-icon"),a(3),e(),a(4),e(),o(5,"mat-dialog-content"),u(6,nt,36,16,"div",2)(7,ot,23,6,"div",3)(8,rt,28,1,"div",4),e(),o(9,"mat-dialog-actions",5)(10,"button",6),x("click",function(){return r.onCancel()}),a(11,"Cancel"),e(),o(12,"button",7),x("click",function(){return r.onConfirm()}),a(13),e()()()),i&2&&(l(3),g(r.getDialogIcon()),l(),c(" ",r.getDialogTitle()," "),l(2),d("ngIf",r.data.mode==="preview"&&r.data.page),l(),d("ngIf",r.data.mode==="delete"&&r.data.page),l(),d("ngIf",r.data.mode==="create"||r.data.mode==="edit"),l(4),d("disabled",!r.isFormValid()),l(),c(" ",r.getConfirmButtonText()," "))},dependencies:[F,Z,A,_e,Se,Me,k,R,N,Pe,be,$,we,q,je,$e,B,O,L,j,V,H,G,se,re,ae,ne,oe,le,me,y,T],styles:[".cms-dialog[_ngcontent-%COMP%]{min-width:500px}.page-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}.content-preview[_ngcontent-%COMP%]{margin-top:16px}.preview-content[_ngcontent-%COMP%]{padding:12px;background-color:#f5f5f5;border-radius:4px;border-left:4px solid #1976d2}.warning-text[_ngcontent-%COMP%]{color:#f44336;font-weight:700;margin-top:16px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}"]})};var lt=()=>[];function mt(n,t){n&1&&(o(0,"th",17),a(1,"Title"),e())}function dt(n,t){if(n&1&&(o(0,"td",18),a(1),e()),n&2){let i=t.$implicit;l(),g(i.title)}}function st(n,t){n&1&&(o(0,"th",17),a(1,"Slug"),e())}function ct(n,t){if(n&1&&(o(0,"td",18),a(1),e()),n&2){let i=t.$implicit;l(),g(i.slug)}}function pt(n,t){n&1&&(o(0,"th",17),a(1,"Author"),e())}function ut(n,t){if(n&1&&(o(0,"td",18),a(1),e()),n&2){let i=t.$implicit;l(),g(i.author)}}function gt(n,t){n&1&&(o(0,"th",17),a(1,"Status"),e())}function ft(n,t){if(n&1&&(o(0,"td",18)(1,"mat-chip",19),a(2),C(3,"titlecase"),e()()),n&2){let i=t.$implicit,r=f();l(),d("color",r.getStatusColor(i.status)),l(),c(" ",S(3,2,i.status)," ")}}function Ct(n,t){n&1&&(o(0,"th",17),a(1,"Created"),e())}function ht(n,t){if(n&1&&(o(0,"td",18),a(1),C(2,"date"),e()),n&2){let i=t.$implicit;l(),g(P(2,1,i.createdAt,"MMM dd, yyyy"))}}function xt(n,t){n&1&&(o(0,"th",17),a(1,"Actions"),e())}function vt(n,t){if(n&1){let i=W();o(0,"td",18)(1,"button",20)(2,"mat-icon"),a(3,"more_vert"),e()(),o(4,"mat-menu",null,0)(6,"button",21),x("click",function(){let m=E(i).$implicit,s=f();return D(s.editPage(m))}),o(7,"mat-icon"),a(8,"edit"),e(),o(9,"span"),a(10,"Edit"),e()(),o(11,"button",21),x("click",function(){let m=E(i).$implicit,s=f();return D(s.previewPage(m))}),o(12,"mat-icon"),a(13,"visibility"),e(),o(14,"span"),a(15,"Preview"),e()(),o(16,"button",21),x("click",function(){let m=E(i).$implicit,s=f();return D(s.deletePage(m))}),o(17,"mat-icon"),a(18,"delete"),e(),o(19,"span"),a(20,"Delete"),e()()()()}if(n&2){let i=X(5);l(),d("matMenuTriggerFor",i)}}function _t(n,t){n&1&&h(0,"tr",22)}function Mt(n,t){n&1&&h(0,"tr",23)}var Qe=class n{constructor(t,i,r,m,s){this.store=t;this.dialog=i;this.snackBar=r;this.dataService=m;this.persistence=s;this.pages$=this.store.select(Je),this.loading$=this.store.select(Ke)}displayedColumns=["title","slug","author","status","createdAt","actions"];pages$;loading$;ngOnInit(){this.persistence.loadList("cms","/data/cms.json").subscribe(t=>{this.store.dispatch(He({pages:t}))})}getStatusColor(t){switch(t){case"published":return"primary";case"draft":return"warn";case"archived":return"accent";default:return"primary"}}createNewPage(){this.dialog.open(M,{width:"600px",data:{mode:"create"}}).afterClosed().subscribe(i=>{if(i&&i.action==="create"){let r=this.createPageFromFormData(i.data);this.store.dispatch(qe({page:r})),this.snackBar.open("Page created successfully!","Close",{duration:3e3}),console.log("Page created:",r),this.pages$.subscribe(m=>{let s=[...m||[],r];this.persistence.saveList("cms",s)}).unsubscribe()}})}editPage(t){this.dialog.open(M,{width:"600px",data:{mode:"edit",page:t}}).afterClosed().subscribe(r=>{if(r&&r.action==="edit"){let m=Q(J(J({},t),r.data),{updatedAt:new Date().toISOString().split("T")[0]});this.store.dispatch(ze({page:m})),this.snackBar.open(`Page ${t.title} updated successfully!`,"Close",{duration:3e3}),console.log("Page updated:",m),this.pages$.subscribe(s=>{let U=(s||[]).map(K=>K.id===t.id?m:K);this.persistence.saveList("cms",U)}).unsubscribe()}})}previewPage(t){this.dialog.open(M,{width:"500px",data:{mode:"preview",page:t}}).afterClosed().subscribe(r=>{console.log("Page previewed for:",t.title)})}deletePage(t){this.dialog.open(M,{width:"400px",data:{mode:"delete",page:t}}).afterClosed().subscribe(r=>{r&&r.action==="delete"&&(this.store.dispatch(Ue({id:t.id})),this.snackBar.open(`Page ${t.title} deleted successfully!`,"Close",{duration:3e3}),console.log("Page deleted:",t),this.pages$.subscribe(m=>{let s=(m||[]).filter(U=>U.id!==t.id);this.persistence.saveList("cms",s)}).unsubscribe())})}createPageFromFormData(t){let i=this.generatePageId(),r=new Date().toISOString().split("T")[0];return{id:i,title:t.title,slug:t.slug,status:t.status,author:t.author,createdAt:r,updatedAt:r,content:t.content}}generatePageId(){let t=0;return this.pages$.subscribe(i=>{t=i.length}).unsubscribe(),(t+1).toString()}static \u0275fac=function(i){return new(i||n)(p(te),p(ve),p(Ve),p(Ee),p(Ge))};static \u0275cmp=I({type:n,selectors:[["app-cms"]],decls:33,vars:6,consts:[["menu","matMenu"],[1,"cms-container"],[1,"cms-header"],["mat-raised-button","","color","primary",3,"click"],[1,"pages-table-card"],[1,"table-container"],["mat-table","",1,"pages-table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","slug"],["matColumnDef","author"],["matColumnDef","status"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&(o(0,"div",1)(1,"div",2)(2,"h1"),a(3,"Content Management"),e(),o(4,"button",3),x("click",function(){return r.createNewPage()}),o(5,"mat-icon"),a(6,"add"),e(),a(7," New Page "),e()(),o(8,"mat-card",4)(9,"mat-card-content")(10,"div",5)(11,"table",6),C(12,"async"),v(13,7),u(14,mt,2,0,"th",8)(15,dt,2,1,"td",9),_(),v(16,10),u(17,st,2,0,"th",8)(18,ct,2,1,"td",9),_(),v(19,11),u(20,pt,2,0,"th",8)(21,ut,2,1,"td",9),_(),v(22,12),u(23,gt,2,0,"th",8)(24,ft,4,4,"td",9),_(),v(25,13),u(26,Ct,2,0,"th",8)(27,ht,3,4,"td",9),_(),v(28,14),u(29,xt,2,0,"th",8)(30,vt,21,1,"td",9),_(),u(31,_t,1,0,"tr",15)(32,Mt,1,0,"tr",16),e()()()()()),i&2&&(l(11),d("dataSource",S(12,3,r.pages$)||Y(5,lt)),l(20),d("matHeaderRowDef",r.displayedColumns),l(),d("matRowDefColumns",r.displayedColumns))},dependencies:[F,Ne,De,ye,Be,Te,Ie,Re,Fe,Oe,ke,Ae,L,j,V,k,R,ce,B,O,$,N,q,H,G,fe,ue,pe,ge,A,Le,Ce,ee,y,T],styles:[".cms-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.cms-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.cms-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:300;color:#333}.pages-table-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.pages-table[_ngcontent-%COMP%]{width:100%}.pages-table[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;font-weight:500}@media (max-width: 768px){.cms-container[_ngcontent-%COMP%]{padding:16px}.cms-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.cms-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}"]})};export{Qe as CmsComponent};
