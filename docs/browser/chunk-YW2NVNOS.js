import{a as Mt,d as bt,e as wt}from"./chunk-2DMR4SMA.js";import{c as it}from"./chunk-E4WH3ZPC.js";import{a as nt}from"./chunk-YV3TLQAO.js";import{a as at,b as ot,c as rt,d as st,e as lt,f as dt,g as ct,h as mt,i as pt,j as gt,k as ht}from"./chunk-6GSHFZDM.js";import{a as _t,b as vt,c as Ct}from"./chunk-GX5RGQ4J.js";import{b as ut,c as ft,d as yt}from"./chunk-GXHTTDCA.js";import"./chunk-AAIC3GS6.js";import{K as q,n as F,o as f,p as j}from"./chunk-7LI5U462.js";import{$b as R,$d as J,Ac as $,Bb as x,Bc as L,Cc as k,Db as A,Hd as G,Kd as B,La as s,Ob as o,Pb as m,Qb as p,Rd as U,Sb as D,Ta as S,Tb as O,Ub as T,Ud as N,Vd as V,Xb as E,Yb as u,Yd as W,Za as P,Zb as C,Zd as Q,_a as w,cb as g,fe as Z,ga as b,ie as Y,je as K,ke as X,me as tt,ne as et,qb as c,rb as n,sb as a,tb as h,uc as I,vc as H,wb as _,xb as v,xd as y}from"./chunk-H7G55VRW.js";var z=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=w({type:i});static \u0275inj=b({imports:[y,y]})}return i})();var St=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=w({type:i});static \u0275inj=b({imports:[z,y,z,y]})}return i})();var M=j("analytics"),Pt=f(M,i=>i.dashboardData),Dt=f(M,i=>i.loading),re=f(M,i=>i.salesData),se=f(M,i=>i.userData),le=f(M,i=>i.error);var Ot=()=>["name","sales","revenue","growth"];function zt(i,e){if(i&1&&(n(0,"mat-option",41),o(1),a()),i&2){let r=e.$implicit;c("value",r.value),s(),p(" ",r.label," ")}}function At(i,e){i&1&&(n(0,"th",42),o(1,"Product Name"),a())}function Rt(i,e){if(i&1&&(n(0,"td",43),o(1),a()),i&2){let r=e.$implicit;s(),m(r.name)}}function It(i,e){i&1&&(n(0,"th",42),o(1,"Sales"),a())}function Ht(i,e){if(i&1&&(n(0,"td",43),o(1),u(2,"number"),a()),i&2){let r=e.$implicit;s(),m(C(2,1,r.sales))}}function $t(i,e){i&1&&(n(0,"th",42),o(1,"Revenue"),a())}function Lt(i,e){if(i&1&&(n(0,"td",43),o(1),u(2,"currency"),a()),i&2){let r=e.$implicit;s(),m(R(2,1,r.revenue,"USD","symbol","1.0-0"))}}function kt(i,e){i&1&&(n(0,"th",42),o(1,"Growth"),a())}function Ft(i,e){if(i&1&&(n(0,"td",43)(1,"span",44),o(2),a()()),i&2){let r=e.$implicit;s(2),m(r.growth)}}function jt(i,e){i&1&&h(0,"tr",45)}function Gt(i,e){i&1&&h(0,"tr",46)}function Bt(i,e){if(i&1&&(n(0,"div",47)(1,"mat-icon",48),o(2),a(),n(3,"div",49)(4,"h4"),o(5),a(),n(6,"p"),o(7),a(),n(8,"span",50),o(9),a()()()),i&2){let r=e.$implicit,t=A();s(),c("ngClass","activity-"+t.getActivityColor(r.type)),s(),p(" ",t.getActivityIcon(r.type)," "),s(3),m(r.action),s(2),m(r.description),s(2),m(r.time)}}var Tt=class i{constructor(e,r){this.store=e;this.dataService=r;this.dashboardData$=this.store.select(Pt),this.loading$=this.store.select(Dt)}dashboardData$;loading$;selectedPeriod="30d";selectedTab=0;salesChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0}}};salesChartData={labels:[],datasets:[]};userChartData={labels:[],datasets:[]};userGrowthChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}}};userGrowthChartData={labels:[],datasets:[]};topProductsChartData={labels:[],datasets:[]};conversionFunnelData={labels:[],datasets:[]};topProducts=[];recentActivity=[];periods=[];analyticsData={};ngOnInit(){this.store.dispatch(Mt()),this.store.dispatch(bt()),this.store.dispatch(wt()),this.dataService.getJson("/data/analytics.json").subscribe({next:e=>{e?.periods&&(this.periods=e.periods),e?.analyticsData&&(this.analyticsData=e.analyticsData),e?.topProducts&&(this.topProducts=e.topProducts),e?.recentActivity&&(this.recentActivity=e.recentActivity),this.updateChartsData()},error:()=>{}})}onPeriodChange(){this.updateChartsData()}updateChartsData(){let e=this.analyticsData?this.analyticsData[this.selectedPeriod]:void 0;e&&(this.salesChartData={labels:e.labels,datasets:[{data:e.salesData,label:"Sales",backgroundColor:"rgba(102, 126, 234, 0.2)",borderColor:"rgba(102, 126, 234, 1)",borderWidth:2,fill:!0}]},this.userChartData={labels:e.labels,datasets:[{data:e.userData,label:"Users",backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:2,fill:!0}]})}exportData(){let e=this.analyticsData[this.selectedPeriod],r={period:this.periods.find(t=>t.value===this.selectedPeriod)?.label,revenue:e.revenue,orders:e.orders,users:e.users,conversion:e.conversion,salesData:e.salesData,userData:e.userData,labels:e.labels,exportDate:new Date().toISOString()};this.downloadJSON(r,`analytics-${this.selectedPeriod}-${new Date().toISOString().split("T")[0]}.json`)}exportCSV(){let e=this.analyticsData[this.selectedPeriod],r=this.convertToCSV(e);this.downloadCSV(r,`analytics-${this.selectedPeriod}-${new Date().toISOString().split("T")[0]}.csv`)}downloadJSON(e,r){let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),d=window.URL.createObjectURL(t),l=document.createElement("a");l.href=d,l.download=r,l.click(),window.URL.revokeObjectURL(d)}downloadCSV(e,r){let t=new Blob([e],{type:"text/csv"}),d=window.URL.createObjectURL(t),l=document.createElement("a");l.href=d,l.download=r,l.click(),window.URL.revokeObjectURL(d)}convertToCSV(e){let r=["Metric","Value"],t=[["Revenue",e.revenue],["Orders",e.orders],["Users",e.users],["Conversion Rate",e.conversion],["",""],["Date","Sales","Users"]];return e.labels.forEach((d,l)=>{t.push([d,e.salesData[l],e.userData[l]])}),[r.join(","),...t.map(d=>d.join(","))].join(`
`)}getActivityIcon(e){switch(e){case"order":return"shopping_cart";case"user":return"person_add";case"payment":return"payment";case"product":return"inventory";case"support":return"support_agent";default:return"info"}}getActivityColor(e){switch(e){case"order":return"primary";case"user":return"accent";case"payment":return"primary";case"product":return"warn";case"support":return"accent";default:return"primary"}}static \u0275fac=function(r){return new(r||i)(S(F),S(nt))};static \u0275cmp=P({type:i,selectors:[["app-analytics"]],decls:137,vars:29,consts:[[1,"analytics-container"],[1,"analytics-header"],[1,"header-controls"],["appearance","outline",1,"period-selector"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"metrics-grid"],[1,"metric-card"],[1,"metric-content"],[1,"metric-info"],[1,"change","positive"],[1,"metric-icon"],[1,"charts-section"],[3,"selectedIndexChange","selectedIndex"],["label","Sales Analytics"],[1,"tab-content"],[1,"chart-row"],[1,"chart-card","large"],["baseChart","","type","line",3,"data","options"],[1,"chart-card"],["baseChart","","type","bar",3,"data","options"],["baseChart","","type","doughnut",3,"data"],["label","Conversion Funnel"],["baseChart","","type","bar",3,"data"],["label","Top Products"],[1,"table-card"],[1,"table-container"],["mat-table","",1,"products-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sales"],["matColumnDef","revenue"],["matColumnDef","growth"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"activity-section"],[1,"activity-list"],["class","activity-item",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"growth","positive"],["mat-header-row",""],["mat-row",""],[1,"activity-item"],[3,"ngClass"],[1,"activity-content"],[1,"time"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Analytics & Reports"),a(),n(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),o(7,"Time Period"),a(),n(8,"mat-select",4),T("ngModelChange",function(l){return O(t.selectedPeriod,l)||(t.selectedPeriod=l),l}),x("selectionChange",function(){return t.onPeriodChange()}),g(9,zt,2,2,"mat-option",5),a()(),n(10,"button",6),x("click",function(){return t.exportData()}),n(11,"mat-icon"),o(12,"download"),a(),o(13," Export JSON "),a(),n(14,"button",7),x("click",function(){return t.exportCSV()}),n(15,"mat-icon"),o(16,"table_chart"),a(),o(17," Export CSV "),a()()(),n(18,"div",8)(19,"mat-card",9)(20,"mat-card-content")(21,"div",10)(22,"div",11)(23,"h3"),o(24),u(25,"number"),a(),n(26,"p"),o(27,"Total Revenue"),a(),n(28,"span",12),o(29),a()(),n(30,"div",13)(31,"mat-icon"),o(32,"attach_money"),a()()()()(),n(33,"mat-card",9)(34,"mat-card-content")(35,"div",10)(36,"div",11)(37,"h3"),o(38),u(39,"number"),a(),n(40,"p"),o(41,"Total Orders"),a(),n(42,"span",12),o(43),a()(),n(44,"div",13)(45,"mat-icon"),o(46,"shopping_cart"),a()()()()(),n(47,"mat-card",9)(48,"mat-card-content")(49,"div",10)(50,"div",11)(51,"h3"),o(52),u(53,"number"),a(),n(54,"p"),o(55,"Total Users"),a(),n(56,"span",12),o(57),a()(),n(58,"div",13)(59,"mat-icon"),o(60,"people"),a()()()()(),n(61,"mat-card",9)(62,"mat-card-content")(63,"div",10)(64,"div",11)(65,"h3"),o(66),a(),n(67,"p"),o(68,"Conversion Rate"),a(),n(69,"span",12),o(70),a()(),n(71,"div",13)(72,"mat-icon"),o(73,"trending_up"),a()()()()()(),n(74,"div",14)(75,"mat-tab-group",15),T("selectedIndexChange",function(l){return O(t.selectedTab,l)||(t.selectedTab=l),l}),n(76,"mat-tab",16)(77,"div",17)(78,"div",18)(79,"mat-card",19)(80,"mat-card-header")(81,"mat-card-title"),o(82,"Revenue & Profit Trends"),a()(),n(83,"mat-card-content"),h(84,"canvas",20),a()()(),n(85,"div",18)(86,"mat-card",21)(87,"mat-card-header")(88,"mat-card-title"),o(89,"User Growth"),a()(),n(90,"mat-card-content"),h(91,"canvas",22),a()(),n(92,"mat-card",21)(93,"mat-card-header")(94,"mat-card-title"),o(95,"Category Distribution"),a()(),n(96,"mat-card-content"),h(97,"canvas",23),a()()()()(),n(98,"mat-tab",24)(99,"div",17)(100,"mat-card",21)(101,"mat-card-header")(102,"mat-card-title"),o(103,"Conversion Funnel Analysis"),a()(),n(104,"mat-card-content"),h(105,"canvas",25),a()()()(),n(106,"mat-tab",26)(107,"div",17)(108,"mat-card",27)(109,"mat-card-header")(110,"mat-card-title"),o(111,"Top Performing Products"),a()(),n(112,"mat-card-content")(113,"div",28)(114,"table",29),_(115,30),g(116,At,2,0,"th",31)(117,Rt,2,1,"td",32),v(),_(118,33),g(119,It,2,0,"th",31)(120,Ht,3,3,"td",32),v(),_(121,34),g(122,$t,2,0,"th",31)(123,Lt,3,6,"td",32),v(),_(124,35),g(125,kt,2,0,"th",31)(126,Ft,3,1,"td",32),v(),g(127,jt,1,0,"tr",36)(128,Gt,1,0,"tr",37),a()()()()()()()(),n(129,"div",38)(130,"mat-card")(131,"mat-card-header")(132,"mat-card-title"),o(133,"Recent Activity"),a()(),n(134,"mat-card-content")(135,"div",39),g(136,Bt,10,5,"div",40),a()()()()()),r&2&&(s(8),D("ngModel",t.selectedPeriod),s(),c("ngForOf",t.periods),s(15),p("$",C(25,21,t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].revenue)),s(5),p("+",((t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].conversion)||0)*10,"%"),s(9),m(C(39,23,t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].orders)),s(5),p("+",((t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].conversion)||0)*8,"%"),s(9),m(C(53,25,t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].users)),s(5),p("+",((t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].conversion)||0)*5,"%"),s(9),p("",t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].conversion,"%"),s(4),p("+",((t.analyticsData[t.selectedPeriod]==null?null:t.analyticsData[t.selectedPeriod].conversion)||0)*.5,"%"),s(5),D("selectedIndex",t.selectedTab),s(9),c("data",t.salesChartData)("options",t.salesChartOptions),s(7),c("data",t.userGrowthChartData)("options",t.userGrowthChartOptions),s(6),c("data",t.topProductsChartData),s(8),c("data",t.conversionFunnelData),s(9),c("dataSource",t.topProducts),s(13),c("matHeaderRowDef",E(27,Ot)),s(),c("matRowDefColumns",E(28,Ot)),s(8),c("ngForOf",t.recentActivity))},dependencies:[k,I,H,U,G,B,et,Y,X,tt,K,St,V,N,Q,W,yt,Z,J,ft,ut,q,Ct,_t,vt,ht,at,rt,ct,st,ot,mt,lt,dt,pt,gt,it,$,L],styles:[".analytics-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.analytics-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px}.analytics-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:300;color:#333}.analytics-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.analytics-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]   .period-selector[_ngcontent-%COMP%]{min-width:150px}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.metric-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026}.metric-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:28px;font-weight:500;color:#333}.metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:14px}.metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .change.positive[_ngcontent-%COMP%]{color:#4caf50}.metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .change.negative[_ngcontent-%COMP%]{color:#f44336}.metric-content[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#1976d2}.charts-section[_ngcontent-%COMP%]{margin-bottom:32px}.charts-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px 0}.chart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:24px;margin-bottom:24px}.chart-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.chart-row[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{grid-column:1/-1}.chart-row[_ngcontent-%COMP%]:not(:last-child)   .chart-card[_ngcontent-%COMP%]:not(.large){grid-template-columns:1fr 1fr}.chart-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a}.chart-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:24px}.table-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.products-table[_ngcontent-%COMP%]{width:100%}.products-table[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]{font-weight:500}.products-table[_ngcontent-%COMP%]   .growth.positive[_ngcontent-%COMP%]{color:#4caf50}.products-table[_ngcontent-%COMP%]   .growth.negative[_ngcontent-%COMP%]{color:#f44336}.activity-section[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:16px 0;border-bottom:1px solid #eee}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:16px;margin-top:4px}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   mat-icon.activity-primary[_ngcontent-%COMP%]{color:#1976d2}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   mat-icon.activity-accent[_ngcontent-%COMP%]{color:#ff4081}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   mat-icon.activity-warn[_ngcontent-%COMP%]{color:#f44336}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]{flex:1}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500;color:#333}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;color:#666;font-size:14px}.activity-list[_ngcontent-%COMP%]   .activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:12px;color:#999}@media (max-width: 768px){.analytics-container[_ngcontent-%COMP%]{padding:16px}.analytics-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.analytics-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.analytics-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.metrics-grid[_ngcontent-%COMP%], .chart-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}"]})};export{Tt as AnalyticsComponent};
